{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport ufetch from \"../ufetch\";\nimport axios from \"axios\";\nexport var Auth = /*#__PURE__*/function () {\n  function Auth() {\n    _classCallCheck(this, Auth);\n  }\n\n  _createClass(Auth, [{\n    key: \"signup\",\n    value: function () {\n      var _signup = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(params) {\n        var query_params;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query_params = new URLSearchParams(params).toString();\n                _context.next = 3;\n                return ufetch(\"/register\", {\n                  method: \"POST\",\n                  body: query_params\n                });\n\n              case 3:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function signup(_x) {\n        return _signup.apply(this, arguments);\n      }\n\n      return signup;\n    }()\n  }, {\n    key: \"confirmaccount\",\n    value: function () {\n      var _confirmaccount = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(integer_key) {\n        var rs;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _context2.next = 2;\n                return axios.post(\"http://51.116.114.155:8080/auth/keyinput/\", {\n                  integer_key: integer_key\n                });\n\n              case 2:\n                rs = _context2.sent;\n                return _context2.abrupt(\"return\", rs);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function confirmaccount(_x2) {\n        return _confirmaccount.apply(this, arguments);\n      }\n\n      return confirmaccount;\n    }()\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(authentication_property, password) {\n        var rs;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.next = 2;\n                return axios.post(\"http://51.116.114.155:8080/auth/token\", {\n                  authentication_property: authentication_property,\n                  password: password // authentication_property: \"ogembodennis@gmail.com\",\n                  // password: \"@Beloved2020\",\n\n                });\n\n              case 2:\n                rs = _context3.sent;\n                return _context3.abrupt(\"return\", rs);\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function login(_x3, _x4) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: \"forgotpassword\",\n    value: function () {\n      var _forgotpassword = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(authentication_property) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                data = new URLSearchParams(authentication_property).toString();\n                _context4.next = 3;\n                return ufetch(\"/auth/password-forgotten\", {\n                  method: \"POST\",\n                  body: data\n                });\n\n              case 3:\n                return _context4.abrupt(\"return\", _context4.sent);\n\n              case 4:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function forgotpassword(_x5) {\n        return _forgotpassword.apply(this, arguments);\n      }\n\n      return forgotpassword;\n    }()\n  }, {\n    key: \"updateUserProfile\",\n    value: function () {\n      var _updateUserProfile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(userData) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                data = new URLSearchParams(userData).toString();\n                _context5.next = 3;\n                return ufetch(\"accounts/update\", {\n                  method: \"PUT\",\n                  body: data\n                });\n\n              case 3:\n                return _context5.abrupt(\"return\", _context5.sent);\n\n              case 4:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5);\n      }));\n\n      function updateUserProfile(_x6) {\n        return _updateUserProfile.apply(this, arguments);\n      }\n\n      return updateUserProfile;\n    }()\n  }, {\n    key: \"generic_query\",\n    value: function () {\n      var _generic_query = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(ctx) {\n        return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                _context6.next = 2;\n                return ufetch(\"/\".concat(ctx.endpoint, \"/\").concat(ctx.query_params), _objectSpread({\n                  method: ctx.method\n                }, ctx.options));\n\n              case 2:\n                return _context6.abrupt(\"return\", _context6.sent);\n\n              case 3:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6);\n      }));\n\n      function generic_query(_x7) {\n        return _generic_query.apply(this, arguments);\n      }\n\n      return generic_query;\n    }()\n  }]);\n\n  return Auth;\n}();","map":{"version":3,"sources":["C:/wamp64/www/cp-fe/lib/endpoints/auth.ts"],"names":["ufetch","axios","Auth","params","query_params","URLSearchParams","toString","method","body","integer_key","post","rs","authentication_property","password","data","userData","ctx","endpoint","options"],"mappings":";;;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AAEA,WAAaC,IAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,8FACeC,MADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAEUC,gBAAAA,YAFV,GAEyB,IAAIC,eAAJ,CAAoBF,MAApB,EAAmCG,QAAnC,EAFzB;AAAA;AAAA,uBAGiBN,MAAM,CAAC,WAAD,EAAc;AAC/BO,kBAAAA,MAAM,EAAE,MADuB;AAE/BC,kBAAAA,IAAI,EAAEJ;AAFyB,iBAAd,CAHvB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uGASuBK,WATvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAUqBR,KAAK,CAACS,IAAN,CAAW,2CAAX,EAAwD;AACvED,kBAAAA,WAAW,EAAXA;AADuE,iBAAxD,CAVrB;;AAAA;AAUUE,gBAAAA,EAVV;AAAA,kDAcWA,EAdX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8FAiBcC,uBAjBd,EAiB+CC,QAjB/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAmBqBZ,KAAK,CAACS,IAAN,CAAW,uCAAX,EAAoD;AACnEE,kBAAAA,uBAAuB,EAAEA,uBAD0C;AAEnEC,kBAAAA,QAAQ,EAAEA,QAFyD,CAGnE;AACA;;AAJmE,iBAApD,CAnBrB;;AAAA;AAmBUF,gBAAAA,EAnBV;AAAA,kDA0BWA,EA1BX;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uGAqCuBC,uBArCvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAsCUE,gBAAAA,IAtCV,GAsCiB,IAAIT,eAAJ,CAAoBO,uBAApB,EAA6CN,QAA7C,EAtCjB;AAAA;AAAA,uBAuCiBN,MAAM,CAAC,0BAAD,EAA6B;AAC9CO,kBAAAA,MAAM,EAAE,MADsC;AAE9CC,kBAAAA,IAAI,EAAEM;AAFwC,iBAA7B,CAvCvB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0GA6C0BC,QA7C1B;AAAA;AAAA;AAAA;AAAA;AAAA;AA8CUD,gBAAAA,IA9CV,GA8CiB,IAAIT,eAAJ,CAAoBU,QAApB,EAA8BT,QAA9B,EA9CjB;AAAA;AAAA,uBA+CiBN,MAAM,CAAC,iBAAD,EAAoB;AACrCO,kBAAAA,MAAM,EAAE,KAD6B;AAErCC,kBAAAA,IAAI,EAAEM;AAF+B,iBAApB,CA/CvB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sGAqDgCE,GArDhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBAsDiBhB,MAAM,YAAKgB,GAAG,CAACC,QAAT,cAAqBD,GAAG,CAACZ,YAAzB;AACjBG,kBAAAA,MAAM,EAAES,GAAG,CAACT;AADK,mBAEdS,GAAG,CAACE,OAFU,EAtDvB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA","sourcesContent":["import ufetch from \"../ufetch\";\r\nimport axios from \"axios\";\r\n\r\nexport class Auth {\r\n  async signup(params: any) {\r\n    const query_params = new URLSearchParams(params as any).toString();\r\n    return await ufetch(\"/register\", {\r\n      method: \"POST\",\r\n      body: query_params,\r\n    });\r\n  }\r\n\r\n  async confirmaccount(integer_key: number) {\r\n    const rs = await axios.post(\"http://51.116.114.155:8080/auth/keyinput/\", {\r\n      integer_key,\r\n    });\r\n\r\n    return rs;\r\n  }\r\n\r\n  async login(authentication_property: string, password: string) {\r\n    //authentication_property: email or phone number for login\r\n    const rs = await axios.post(\"http://51.116.114.155:8080/auth/token\", {\r\n      authentication_property: authentication_property,\r\n      password: password,\r\n      // authentication_property: \"ogembodennis@gmail.com\",\r\n      // password: \"@Beloved2020\",\r\n    });\r\n\r\n    return rs;\r\n    // const data = new URLSearchParams({\r\n    //   authentication_property,\r\n    //   password,\r\n    // }).toString();\r\n    // return await ufetch(\"/auth/token\", {\r\n    //   method: \"POST\",\r\n    //   body: data,\r\n    // });\r\n  }\r\n\r\n  async forgotpassword(authentication_property: string) {\r\n    const data = new URLSearchParams(authentication_property).toString();\r\n    return await ufetch(\"/auth/password-forgotten\", {\r\n      method: \"POST\",\r\n      body: data,\r\n    });\r\n  }\r\n\r\n  async updateUserProfile(userData: any) {\r\n    const data = new URLSearchParams(userData).toString();\r\n    return await ufetch(\"accounts/update\", {\r\n      method: \"PUT\",\r\n      body: data,\r\n    });\r\n  }\r\n\r\n  protected async generic_query(ctx: any) {\r\n    return await ufetch(`/${ctx.endpoint}/${ctx.query_params}`, {\r\n      method: ctx.method,\r\n      ...ctx.options,\r\n    });\r\n  }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}