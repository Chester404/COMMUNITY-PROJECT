{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _this = this,\n    _jsxFileName = \"C:\\\\Users\\\\AMALITECH\\\\Desktop\\\\cp-fe\\\\pages\\\\auth\\\\login.tsx\",\n    _s = $RefreshSig$();\n\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from \"next/head\";\nimport { useRouter } from \"next/router\";\nimport Layout from \"../../components/Layout\";\nimport Link from \"next/link\";\nimport { useState } from \"react\";\nimport { Auth } from \"../../lib/endpoints\";\n\nvar Loader = function Loader() {\n  return __jsx(\"span\", {\n    className: \"spinner-border spinner-border-sm\",\n    role: \"status\",\n    \"aria-hidden\": \"true\",\n    style: {\n      width: \"1.5rem\",\n      height: \"1.5rem\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 10,\n      columnNumber: 3\n    }\n  });\n};\n\n_c = Loader;\n\nvar Login = function Login() {\n  _s();\n\n  var _useState = useState(false),\n      show = _useState[0],\n      setShow = _useState[1];\n\n  var _useState2 = useState(null),\n      isRegistered = _useState2[0],\n      setIsRegistered = _useState2[1];\n\n  var _useState3 = useState(null),\n      isInputValid = _useState3[0],\n      setIsInputValid = _useState3[1];\n\n  var _useState4 = useState(null),\n      isLoggedIn = _useState4[0],\n      setIsLoggedIn = _useState4[1];\n\n  var _useState5 = useState(\"\"),\n      promptBody = _useState5[0],\n      setPromptBody = _useState5[1];\n\n  var _useState6 = useState(null),\n      linkTo = _useState6[0],\n      setLinkTo = _useState6[1];\n\n  var _useState7 = useState(null),\n      linkText = _useState7[0],\n      setLinkText = _useState7[1];\n\n  var _useState8 = useState(\"\"),\n      authentication_property = _useState8[0],\n      setaAthenticationProperty = _useState8[1];\n\n  var _useState9 = useState(\"\"),\n      password = _useState9[0],\n      setPassword = _useState9[1];\n\n  var _useState10 = useState(false),\n      loading = _useState10[0],\n      setLoading = _useState10[1];\n\n  var _useState11 = useState(\"\"),\n      status = _useState11[0],\n      setStatus = _useState11[1];\n\n  var _useState12 = useState(\"blue\"),\n      statusColor = _useState12[0],\n      setStatusColor = _useState12[1];\n\n  var router = useRouter();\n\n  var handleClose = function handleClose() {\n    return setShow(false);\n  };\n\n  var handleShow = function handleShow() {\n    return setShow(true);\n  };\n\n  var handleSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(event) {\n      var result;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              event.preventDefault();\n              setLoading(true);\n              setStatusColor(\"blue\");\n              setStatus(\"Please wait...\");\n              _context.prev = 4;\n              _context.next = 7;\n              return new Auth().login(authentication_property, password);\n\n            case 7:\n              result = _context.sent;\n\n              if (result.status === 200) {\n                setLoading(false);\n                console.log(\"RESULT:\", result);\n                setStatusColor(\"blue\");\n                setStatus(\"Authentication success\");\n                setTimeout(function () {\n                  // go to landing page\n                  window.localStorage.setItem(\"cp-a\", JSON.stringify(result.data));\n                  router.push(\"/jobs\"); //   setPromptBody(\"Replace this prompt with landing page\");\n                  //   setShow(true);\n                  //   setLoading(false);\n                }, 250);\n              }\n\n              _context.next = 16;\n              break;\n\n            case 11:\n              _context.prev = 11;\n              _context.t0 = _context[\"catch\"](4);\n              console.log(_context.t0.message);\n\n              if (_context.t0.message === \"Request failed with status code 401\") {\n                // bad credentials\n                console.log(\"BAD CREDENTIALS\");\n                setStatusColor(\"red\");\n                setStatus(\"Please check your credentials and try again.\"); // setPromptBody(\"Please check your credentials and try again.\");\n\n                setLinkTo(\"signup\");\n                setLinkText(\"Signup\");\n                setShow(true);\n                setLoading(false);\n              } else if (_context.t0.message === \"Request failed with status code 404\") {\n                // bad endpoint\n                setStatusColor(\"red\");\n                setStatus(\"An error occured. Contact systems admin\");\n              } else if (_context.t0.message === \"Network Error\") {\n                // bad network connection\n                setStatusColor(\"red\");\n                setStatus(\"Please check your network connection and try again.\"); // setPromptBody(\"Please check your network connection and try again.\");\n                // setShow(true);\n\n                setLoading(false);\n              }\n\n              setTimeout(function () {\n                setStatus(\"\");\n              }, 3500);\n\n            case 16:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[4, 11]]);\n    }));\n\n    return function handleSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return __jsx(React.Fragment, null, __jsx(Layout, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }\n  }, __jsx(Head, {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 9\n    }\n  }, __jsx(\"link\", {\n    rel: \"stylesheet\",\n    type: \"text/css\",\n    href: \"/auth.css\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 11\n    }\n  }, __jsx(\"h3\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 13\n    }\n  }, __jsx(\"b\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 103,\n      columnNumber: 15\n    }\n  }, \"Login\"))), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 106,\n      columnNumber: 11\n    }\n  })), \" \", __jsx(\"div\", {\n    className: \"row\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, __jsx(\"form\", {\n    style: {\n      width: \"100%\"\n    },\n    onSubmit: handleSubmit,\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group col-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"email\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 15\n    }\n  }, \"Email address / Phone Number\"), __jsx(\"input\", {\n    type: \"email\",\n    className: \"form-control cinput\",\n    id: \"email\",\n    \"aria-describedby\": \"emailHelp\",\n    placeholder: \"Enter email or Phone number\",\n    value: authentication_property,\n    onChange: function onChange(e) {\n      return setaAthenticationProperty(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group col-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 13\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"exampleInputPassword1\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 15\n    }\n  }, \"Password\"), __jsx(\"input\", {\n    type: \"password\",\n    className: \"form-control cinput\",\n    id: \"password\",\n    placeholder: \"Password\",\n    \"data-toggle\": \"password\",\n    value: password,\n    onChange: function onChange(e) {\n      return setPassword(e.target.value);\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group col-12\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary btn-block submitbutton\",\n    id: \"submitButton\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 15\n    }\n  }, \"Login\")), __jsx(\"div\", {\n    style: {\n      textAlign: \"center\",\n      color: statusColor\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 13\n    }\n  }, \"\\xA0\", status), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    style: {\n      textAlign: \"center\",\n      fontWeight: \"bolder\"\n    },\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 13\n    }\n  }, __jsx(\"a\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, \"Forgotten Password?\"), __jsx(\"br\", {\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 15\n    }\n  }), \"Don't have an account?\", __jsx(Link, {\n    href: \"/auth/signup\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, __jsx(\"a\", {\n    id: \"signup\",\n    __self: _this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 17\n    }\n  }, \"Sign Up\")))))));\n};\n\n_s(Login, \"6Batv2xJpoumH2VJhmLkL7NihdA=\", false, function () {\n  return [useRouter];\n});\n\n_c2 = Login;\nexport default Login;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Loader\");\n$RefreshReg$(_c2, \"Login\");","map":{"version":3,"sources":["C:/Users/AMALITECH/Desktop/cp-fe/pages/auth/login.tsx"],"names":["Head","useRouter","Layout","Link","useState","Auth","Loader","width","height","Login","show","setShow","isRegistered","setIsRegistered","isInputValid","setIsInputValid","isLoggedIn","setIsLoggedIn","promptBody","setPromptBody","linkTo","setLinkTo","linkText","setLinkText","authentication_property","setaAthenticationProperty","password","setPassword","loading","setLoading","status","setStatus","statusColor","setStatusColor","router","handleClose","handleShow","handleSubmit","event","preventDefault","login","result","console","log","setTimeout","window","localStorage","setItem","JSON","stringify","data","push","message","textAlign","e","target","value","color","fontWeight"],"mappings":"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","sourcesContent":["import Head from \"next/head\";\r\nimport { useRouter } from \"next/router\";\r\nimport Layout from \"../../components/Layout\";\r\nimport Link from \"next/link\";\r\nimport { useState, FormEvent } from \"react\";\r\nimport { Auth } from \"../../lib/endpoints\";\r\nimport { route } from \"next/dist/next-server/server/router\";\r\n\r\nconst Loader = () => (\r\n  <span\r\n    className=\"spinner-border spinner-border-sm\"\r\n    role=\"status\"\r\n    aria-hidden=\"true\"\r\n    style={{ width: \"1.5rem\", height: \"1.5rem\" }}\r\n  ></span>\r\n);\r\n\r\nconst Login = () => {\r\n  const [show, setShow] = useState(false);\r\n  const [isRegistered, setIsRegistered] = useState(null);\r\n  const [isInputValid, setIsInputValid] = useState(null);\r\n  const [isLoggedIn, setIsLoggedIn] = useState(null);\r\n  const [promptBody, setPromptBody] = useState(\"\");\r\n  const [linkTo, setLinkTo] = useState(null);\r\n  const [linkText, setLinkText] = useState(null);\r\n  const [authentication_property, setaAthenticationProperty] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [loading, setLoading] = useState(false);\r\n  const [status, setStatus] = useState(\"\");\r\n  const [statusColor, setStatusColor] = useState(\"blue\");\r\n\r\n  const router = useRouter();\r\n\r\n  const handleClose = () => setShow(false);\r\n  const handleShow = () => setShow(true);\r\n\r\n  const handleSubmit = async (event) => {\r\n    event.preventDefault();\r\n    setLoading(true);\r\n    setStatusColor(\"blue\");\r\n    setStatus(\"Please wait...\");\r\n    try {\r\n      const result = await new Auth().login(authentication_property, password);\r\n      if (result.status === 200) {\r\n        setLoading(false);\r\n        console.log(\"RESULT:\", result);\r\n        setStatusColor(\"blue\");\r\n        setStatus(\"Authentication success\");\r\n\r\n        setTimeout(() => {\r\n          // go to landing page\r\n          window.localStorage.setItem(\"cp-a\", JSON.stringify(result.data));\r\n          router.push(\"/jobs\");\r\n          //   setPromptBody(\"Replace this prompt with landing page\");\r\n          //   setShow(true);\r\n          //   setLoading(false);\r\n        }, 250);\r\n      }\r\n    } catch (err) {\r\n      console.log(err.message);\r\n      if (err.message === \"Request failed with status code 401\") {\r\n        // bad credentials\r\n        console.log(\"BAD CREDENTIALS\");\r\n        setStatusColor(\"red\");\r\n        setStatus(\"Please check your credentials and try again.\");\r\n\r\n        // setPromptBody(\"Please check your credentials and try again.\");\r\n        setLinkTo(\"signup\");\r\n        setLinkText(\"Signup\");\r\n        setShow(true);\r\n        setLoading(false);\r\n      } else if (err.message === \"Request failed with status code 404\") {\r\n        // bad endpoint\r\n        setStatusColor(\"red\");\r\n        setStatus(\"An error occured. Contact systems admin\");\r\n      } else if (err.message === \"Network Error\") {\r\n        // bad network connection\r\n        setStatusColor(\"red\");\r\n        setStatus(\"Please check your network connection and try again.\");\r\n        // setPromptBody(\"Please check your network connection and try again.\");\r\n        // setShow(true);\r\n        setLoading(false);\r\n      }\r\n      setTimeout(() => {\r\n        setStatus(\"\");\r\n      }, 3500);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <>\r\n      <Layout>\r\n        <Head>\r\n          <link rel=\"stylesheet\" type=\"text/css\" href=\"/auth.css\" />\r\n        </Head>\r\n        <div\r\n          style={{\r\n            textAlign: \"center\",\r\n          }}\r\n        >\r\n          <div>\r\n            <h3>\r\n              <b>Login</b>\r\n            </h3>\r\n          </div>\r\n          <br />\r\n        </div>{\" \"}\r\n        <div className=\"row\">\r\n          <form style={{ width: \"100%\" }} onSubmit={handleSubmit}>\r\n            <div className=\"form-group col-12\">\r\n              <label htmlFor=\"email\">Email address / Phone Number</label>\r\n              <input\r\n                type=\"email\"\r\n                className=\"form-control cinput\"\r\n                id=\"email\"\r\n                aria-describedby=\"emailHelp\"\r\n                placeholder=\"Enter email or Phone number\"\r\n                value={authentication_property}\r\n                onChange={(e) => setaAthenticationProperty(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"form-group col-12\">\r\n              <label htmlFor=\"exampleInputPassword1\">Password</label>\r\n              <input\r\n                type=\"password\"\r\n                className=\"form-control cinput\"\r\n                id=\"password\"\r\n                placeholder=\"Password\"\r\n                data-toggle=\"password\"\r\n                value={password}\r\n                onChange={(e) => setPassword(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"form-group col-12\">\r\n              <button\r\n                type=\"submit\"\r\n                className=\"btn btn-primary btn-block submitbutton\"\r\n                id=\"submitButton\"\r\n              >\r\n                Login\r\n              </button>\r\n            </div>\r\n            <div\r\n              style={{\r\n                textAlign: \"center\",\r\n                color: statusColor,\r\n              }}\r\n            >\r\n              &nbsp;{status}\r\n            </div>\r\n            <br />\r\n            <div\r\n              style={{\r\n                textAlign: \"center\",\r\n                fontWeight: \"bolder\",\r\n              }}\r\n            >\r\n              <a>Forgotten Password?</a>\r\n              <br />\r\n              Don't have an account?\r\n              <Link href=\"/auth/signup\">\r\n                <a id=\"signup\">Sign Up</a>\r\n              </Link>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </Layout>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}