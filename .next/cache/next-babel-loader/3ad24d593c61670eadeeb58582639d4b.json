{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/esm/createClass\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport ufetch from \"../ufetch\";\nexport var Auth = /*#__PURE__*/function () {\n  function Auth() {\n    _classCallCheck(this, Auth);\n  }\n\n  _createClass(Auth, [{\n    key: \"signup\",\n    value: function () {\n      var _signup = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(params) {\n        var query_params;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query_params = new URLSearchParams(params).toString();\n                _context.next = 3;\n                return ufetch(\"/register\", {\n                  method: \"POST\",\n                  body: query_params\n                });\n\n              case 3:\n                return _context.abrupt(\"return\", _context.sent);\n\n              case 4:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function signup(_x) {\n        return _signup.apply(this, arguments);\n      }\n\n      return signup;\n    }()\n  }, {\n    key: \"login\",\n    value: function () {\n      var _login = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(authentication_property, password) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                //authentication_property: email or phone number for login\n                data = new URLSearchParams({\n                  authentication_property: authentication_property,\n                  password: password\n                }).toString();\n                _context2.next = 3;\n                return ufetch(\"/auth/token\", {\n                  method: \"POST\",\n                  body: data\n                });\n\n              case 3:\n                return _context2.abrupt(\"return\", _context2.sent);\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function login(_x2, _x3) {\n        return _login.apply(this, arguments);\n      }\n\n      return login;\n    }()\n  }, {\n    key: \"forgotpassword\",\n    value: function () {\n      var _forgotpassword = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(authentication_property) {\n        var data;\n        return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                data = new URLSearchParams(authentication_property).toString();\n                _context3.next = 3;\n                return ufetch(\"/auth/password-forgotten\", {\n                  method: \"POST\",\n                  body: data\n                });\n\n              case 3:\n                return _context3.abrupt(\"return\", _context3.sent);\n\n              case 4:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function forgotpassword(_x4) {\n        return _forgotpassword.apply(this, arguments);\n      }\n\n      return forgotpassword;\n    }()\n  }, {\n    key: \"generic_query\",\n    value: function () {\n      var _generic_query = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(ctx) {\n        return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n          while (1) {\n            switch (_context4.prev = _context4.next) {\n              case 0:\n                _context4.next = 2;\n                return ufetch(\"/\".concat(ctx.endpoint, \"/\").concat(ctx.query_params), _objectSpread({\n                  method: ctx.method\n                }, ctx.options));\n\n              case 2:\n                return _context4.abrupt(\"return\", _context4.sent);\n\n              case 3:\n              case \"end\":\n                return _context4.stop();\n            }\n          }\n        }, _callee4);\n      }));\n\n      function generic_query(_x5) {\n        return _generic_query.apply(this, arguments);\n      }\n\n      return generic_query;\n    }()\n  }]);\n\n  return Auth;\n}();","map":{"version":3,"sources":["/home/james/Documents/dev/cp-fe/lib/endpoints/auth.ts"],"names":["ufetch","Auth","params","query_params","URLSearchParams","toString","method","body","authentication_property","password","data","ctx","endpoint","options"],"mappings":";;;;;;;;;;AAAA,OAAOA,MAAP,MAAmB,WAAnB;AAEA,WAAaC,IAAb;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA,8FACeC,MADf;AAAA;AAAA;AAAA;AAAA;AAAA;AAEUC,gBAAAA,YAFV,GAEyB,IAAIC,eAAJ,CAAoBF,MAApB,EAAmCG,QAAnC,EAFzB;AAAA;AAAA,uBAGiBL,MAAM,CAAC,WAAD,EAAc;AAC/BM,kBAAAA,MAAM,EAAE,MADuB;AAE/BC,kBAAAA,IAAI,EAAEJ;AAFyB,iBAAd,CAHvB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,8FAScK,uBATd,EAS+CC,QAT/C;AAAA;AAAA;AAAA;AAAA;AAAA;AAUI;AACMC,gBAAAA,IAXV,GAWiB,IAAIN,eAAJ,CAAoB;AAC/BI,kBAAAA,uBAAuB,EAAvBA,uBAD+B;AAE/BC,kBAAAA,QAAQ,EAARA;AAF+B,iBAApB,EAGVJ,QAHU,EAXjB;AAAA;AAAA,uBAeiBL,MAAM,CAAC,aAAD,EAAgB;AACjCM,kBAAAA,MAAM,EAAE,MADyB;AAEjCC,kBAAAA,IAAI,EAAEG;AAF2B,iBAAhB,CAfvB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uGAqBuBF,uBArBvB;AAAA;AAAA;AAAA;AAAA;AAAA;AAsBUE,gBAAAA,IAtBV,GAsBiB,IAAIN,eAAJ,CAAoBI,uBAApB,EAA6CH,QAA7C,EAtBjB;AAAA;AAAA,uBAuBiBL,MAAM,CAAC,0BAAD,EAA6B;AAC9CM,kBAAAA,MAAM,EAAE,MADsC;AAE9CC,kBAAAA,IAAI,EAAEG;AAFwC,iBAA7B,CAvBvB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sGA6BgCC,GA7BhC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,uBA8BiBX,MAAM,YAAKW,GAAG,CAACC,QAAT,cAAqBD,GAAG,CAACR,YAAzB;AACjBG,kBAAAA,MAAM,EAAEK,GAAG,CAACL;AADK,mBAEdK,GAAG,CAACE,OAFU,EA9BvB;;AAAA;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA","sourcesContent":["import ufetch from \"../ufetch\";\n\nexport class Auth {\n  async signup(params: any) {\n    const query_params = new URLSearchParams(params as any).toString();\n    return await ufetch(\"/register\", {\n      method: \"POST\",\n      body: query_params,\n    });\n  }\n\n  async login(authentication_property: string, password: string) {\n    //authentication_property: email or phone number for login\n    const data = new URLSearchParams({\n      authentication_property,\n      password,\n    }).toString();\n    return await ufetch(\"/auth/token\", {\n      method: \"POST\",\n      body: data,\n    });\n  }\n\n  async forgotpassword(authentication_property: string) {\n    const data = new URLSearchParams(authentication_property).toString();\n    return await ufetch(\"/auth/password-forgotten\", {\n      method: \"POST\",\n      body: data,\n    });\n  }\n\n  protected async generic_query(ctx: any) {\n    return await ufetch(`/${ctx.endpoint}/${ctx.query_params}`, {\n      method: ctx.method,\n      ...ctx.options,\n    });\n  }\n}\n"]},"metadata":{},"sourceType":"module"}