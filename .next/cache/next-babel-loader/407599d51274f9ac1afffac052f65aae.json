{"ast":null,"code":"var _jsxFileName = \"/home/james/Documents/dev/cp-fe/contextStore/sampleindex.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { createContext, useReducer } from \"react\"; //import { createInterface } from \"readline\";\n//import { types } from 'util';\n\nexport const MyContext = createContext(\"\");\nconst allData = new Array(25).fill(0).map((_val, i) => i + 1);\nconst perPage = 10;\nconst types = {\n  start: \"START\",\n  loaded: \"LOADED\"\n};\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case types.start:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        loading: true\n      });\n\n    case types.loaded:\n      return _objectSpread(_objectSpread({}, state), {}, {\n        loading: false,\n        data: [...state.data, ...action.newData],\n        more: action.newData.length === perPage,\n        after: state.after + action.newData.length\n      });\n\n    default:\n      throw new Error(\"Don't understand action\");\n  }\n};\n\nexport const ContextWrapper = ({\n  children\n}) => {\n  const {\n    0: state,\n    1: dispatch\n  } = useReducer(reducer, {\n    loading: false,\n    more: true,\n    data: [],\n    after: 0\n  });\n  const {\n    loading,\n    data,\n    after,\n    more\n  } = state;\n\n  const load = () => {\n    dispatch({\n      type: types.start\n    });\n    setTimeout(() => {\n      const newData = allData.slice(after, after * perPage);\n      dispatch({\n        type: types.loaded,\n        newData\n      });\n    }, 300);\n  };\n\n  return __jsx(MyContext.Provider, {\n    value: {\n      loading,\n      data,\n      more,\n      load\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 3\n    }\n  }, children);\n};","map":{"version":3,"sources":["/home/james/Documents/dev/cp-fe/contextStore/sampleindex.tsx"],"names":["createContext","useReducer","MyContext","allData","Array","fill","map","_val","i","perPage","types","start","loaded","reducer","state","action","type","loading","data","newData","more","length","after","Error","ContextWrapper","children","dispatch","load","setTimeout","slice"],"mappings":";;;;;;;;;;AAAA,SAASA,aAAT,EAAwBC,UAAxB,QAA0C,OAA1C,C,CACA;AACA;;AAEA,OAAO,MAAMC,SAAS,GAAGF,aAAa,CAAe,EAAf,CAA/B;AASP,MAAMG,OAAO,GAAG,IAAIC,KAAJ,CAAU,EAAV,EAAcC,IAAd,CAAmB,CAAnB,EAAsBC,GAAtB,CAA0B,CAACC,IAAD,EAAOC,CAAP,KAAaA,CAAC,GAAG,CAA3C,CAAhB;AACI,MAAMC,OAAO,GAAG,EAAhB;AACA,MAAMC,KAAK,GAAG;AACdC,EAAAA,KAAK,EAAE,OADO;AAEdC,EAAAA,MAAM,EAAE;AAFM,CAAd;;AAKJ,MAAMC,OAAO,GAAG,CAACC,KAAD,EAAkBC,MAAlB,KAA6B;AAC5C,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKN,KAAK,CAACC,KAAX;AACD,6CAAYG,KAAZ;AAAmBG,QAAAA,OAAO,EAAE;AAA5B;;AACC,SAAKP,KAAK,CAACE,MAAX;AACD,6CACKE,KADL;AAEEG,QAAAA,OAAO,EAAE,KAFX;AAGEC,QAAAA,IAAI,EAAE,CAAC,GAAGJ,KAAK,CAACI,IAAV,EAAgB,GAAGH,MAAM,CAACI,OAA1B,CAHR;AAIEC,QAAAA,IAAI,EAAEL,MAAM,CAACI,OAAP,CAAeE,MAAf,KAA0BZ,OAJlC;AAKEa,QAAAA,KAAK,EAAER,KAAK,CAACQ,KAAN,GAAcP,MAAM,CAACI,OAAP,CAAeE;AALtC;;AAOC;AACD,YAAM,IAAIE,KAAJ,CAAU,yBAAV,CAAN;AAZD;AAcA,CAfD;;AAiBA,OAAO,MAAMC,cAAc,GAAG,CAAC;AAAEC,EAAAA;AAAF,CAAD,KAAkB;AAC/C,QAAM;AAAA,OAACX,KAAD;AAAA,OAAQY;AAAR,MAAoBzB,UAAU,CAACY,OAAD,EAAU;AACvCI,IAAAA,OAAO,EAAE,KAD8B;AAEvCG,IAAAA,IAAI,EAAE,IAFiC;AAGvCF,IAAAA,IAAI,EAAE,EAHiC;AAIvCI,IAAAA,KAAK,EAAE;AAJgC,GAAV,CAApC;AAMA,QAAM;AAAEL,IAAAA,OAAF;AAAWC,IAAAA,IAAX;AAAiBI,IAAAA,KAAjB;AAAwBF,IAAAA;AAAxB,MAAiCN,KAAvC;;AAEA,QAAMa,IAAI,GAAG,MAAM;AACZD,IAAAA,QAAQ,CAAC;AAAEV,MAAAA,IAAI,EAAEN,KAAK,CAACC;AAAd,KAAD,CAAR;AAEAiB,IAAAA,UAAU,CAAC,MAAM;AACb,YAAMT,OAAO,GAAGhB,OAAO,CAAC0B,KAAR,CAAcP,KAAd,EAAqBA,KAAK,GAAGb,OAA7B,CAAhB;AACAiB,MAAAA,QAAQ,CAAC;AAAEV,QAAAA,IAAI,EAAEN,KAAK,CAACE,MAAd;AAAsBO,QAAAA;AAAtB,OAAD,CAAR;AAEH,KAJS,EAIP,GAJO,CAAV;AAKH,GARJ;;AASA,SACC,MAAC,SAAD,CAAW,QAAX;AAAoB,IAAA,KAAK,EAAE;AAAEF,MAAAA,OAAF;AAAWC,MAAAA,IAAX;AAAiBE,MAAAA,IAAjB;AAAuBO,MAAAA;AAAvB,KAA3B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAA2DF,QAA3D,CADD;AAGA,CArBM","sourcesContent":["import { createContext, useReducer } from \"react\";\n//import { createInterface } from \"readline\";\n//import { types } from 'util';\n\nexport const MyContext = createContext<string | any>(\"\")\n\ninterface ILoading  {\n\tafter: number,\n\tloading: boolean,\n\tmore: boolean,\n\tdata: any\n}\n\nconst allData = new Array(25).fill(0).map((_val, i) => i + 1);\n    const perPage = 10;\n    const types = {\n    start: \"START\",\n    loaded: \"LOADED\"\n    };\n\nconst reducer = (state: ILoading, action) => {\n\tswitch (action.type) {\n\t  case types.start:\n\t\treturn { ...state, loading: true };\n\t  case types.loaded:\n\t\treturn {\n\t\t  ...state,\n\t\t  loading: false,\n\t\t  data: [...state.data, ...action.newData],\n\t\t  more: action.newData.length === perPage,\n\t\t  after: state.after + action.newData.length\n\t\t};\n\t  default:\n\t\tthrow new Error(\"Don't understand action\");\n\t}\n};\n\nexport const ContextWrapper = ({ children }) => {\n\tconst [state, dispatch] = useReducer(reducer, {\n        loading: false,\n        more: true,\n        data: [],\n        after: 0\n\t})\n\tconst { loading, data, after, more } = state;\n\n\tconst load = () => {\n        dispatch({ type: types.start });\n    \n        setTimeout(() => {\n            const newData = allData.slice(after, after * perPage);\n            dispatch({ type: types.loaded, newData });\n            \n        }, 300);\n    }\n\treturn (\n\t\t<MyContext.Provider value={{ loading, data, more, load }}>{children}</MyContext.Provider>\n\t);\n};\n"]},"metadata":{},"sourceType":"module"}