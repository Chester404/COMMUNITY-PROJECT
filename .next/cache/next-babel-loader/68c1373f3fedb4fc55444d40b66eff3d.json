{"ast":null,"code":"var _jsxFileName = \"C:\\\\wamp64\\\\www\\\\cp-fe\\\\pages\\\\auth\\\\login.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport Head from \"next/head\";\nimport Link from \"next/link\";\nimport { useState, useEffect } from \"react\";\nimport { Auth } from \"../../lib/endpoints\";\nimport { useRouter } from \"next/router\";\nimport Prompt from \"../../components/Prompt\";\n\nconst Login = () => {\n  const {\n    0: authentication_property,\n    1: setAuthenticationProperty\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: show,\n    1: setShow\n  } = useState(false);\n  const {\n    0: prompt_title,\n    1: setPromptTitle\n  } = useState(\"\");\n  const {\n    0: prompt_body,\n    1: setPromptBody\n  } = useState(\"\");\n  const {\n    0: link_to,\n    1: setLinkTo\n  } = useState(\"\");\n  const {\n    0: link_text,\n    1: setLinkText\n  } = useState(\"\");\n\n  const handleClose = () => setShow(false);\n\n  const callPrompt = (title, link, link_text, message) => {\n    if (show) setShow(false);\n    setShow(true);\n    setPromptTitle(title);\n    setLinkText(link_text);\n    setLinkTo(link);\n    setPromptBody(message);\n  };\n\n  const router = useRouter();\n\n  const authenticate = async e => {\n    e.preventDefault();\n\n    try {\n      const response = await new Auth().login(authentication_property, password);\n\n      if (response.status === 200) {\n        window.localStorage.setItem(\"cp-a\", JSON.stringify(response.data));\n        router.push(\"/blog\");\n      }\n    } catch (err) {\n      if (err.message === \"Request failed with status code 401\") {\n        // bad credentials\n        callPrompt(\"Sign Up\", \"\", \"Close\", \"Please check your credentials and try again.\");\n      } else if (err.message === \"Request failed with status code 404\") {\n        // bad endpoint\n        callPrompt(\"Sign Up\", \"\", \"Close\", \"Request failed\");\n      } else if (err.message === \"Network Error\") {\n        // bad network connection\n        callPrompt(\"Sign Up\", \"\", \"Close\", \"Please check your network connection and try again.\");\n      }\n    }\n  };\n\n  useEffect(() => {\n    var body = document.body;\n    body.classList.add(\"parent\");\n  }, []);\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }\n  }, __jsx(\"meta\", {\n    name: \"viewport\",\n    content: \"width=device-width, initial-scale=1.0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 9\n    }\n  }), __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"https://fonts.googleapis.com/icon?family=Material+Icons\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 9\n    }\n  }), __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 9\n    }\n  }, \"Login\"), __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\",\n    integrity: \"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\",\n    crossOrigin: \"anonymous\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 9\n    }\n  }), __jsx(\"script\", {\n    type: \"text/javascript\",\n    src: \"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }\n  }), __jsx(\"script\", {\n    type: \"text/javascript\",\n    src: \"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-show-password/1.0.3/bootstrap-show-password.min.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }\n  }), __jsx(\"link\", {\n    rel: \"stylesheet\",\n    type: \"text/css\",\n    href: \"/login.css\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 9\n    }\n  })), __jsx(Prompt, {\n    title: prompt_title,\n    linkTo: link_to,\n    linkText: link_text,\n    show: show,\n    success: link_to.length > 0 ? true : false,\n    handleClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 7\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 9\n    }\n  }, prompt_body)), __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 111,\n      columnNumber: 9\n    }\n  }, __jsx(\"img\", {\n    className: \"logo\",\n    src: \"/images/Logo.png\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 11\n    }\n  }))), __jsx(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 115,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 11\n    }\n  }, __jsx(\"h3\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 15\n    }\n  }, \"Login\"))), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }\n  })), __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 124,\n      columnNumber: 9\n    }\n  }, __jsx(\"form\", {\n    className: \"needs-validation\",\n    noValidate: true,\n    onSubmit: authenticate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 13\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 15\n    }\n  }, \"Email / Phone Number\"), __jsx(\"input\", {\n    type: \"email\",\n    className: \"form-control textbox\",\n    id: \"InputEmail\",\n    placeholder: \"Please enter a valid email or phone number\",\n    value: authentication_property,\n    onChange: e => setAuthenticationProperty(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 15\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 13\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"exampleInputPassword1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 138,\n      columnNumber: 15\n    }\n  }, \"Password\"), __jsx(\"span\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 15\n    }\n  }, __jsx(\"input\", {\n    type: \"password\",\n    className: \"form-control textbox\",\n    id: \"InputPassword1\",\n    placeholder: \"Password must be at least 8 characters\",\n    \"data-toggle\": \"password\",\n    value: password,\n    onChange: e => setPassword(e.target.value),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 17\n    }\n  }))), __jsx(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 13\n    }\n  }, __jsx(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary btn-block\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 152,\n      columnNumber: 15\n    }\n  }, \"Login\")), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 15\n    }\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"texthover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 17\n    }\n  }, \"Forgot Password?\")), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 15\n    }\n  }, \"Don't have an account?\", \" \", __jsx(Link, {\n    href: \"/auth/signup\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    className: \"signuptext\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 19\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 21\n    }\n  }, \"Sign Up\")))))))), __jsx(\"script\", {\n    type: \"text/javascript\",\n    src: \"/js/a.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }\n  }), __jsx(\"script\", {\n    src: \"https://kit.fontawesome.com/3303a2a495.js\",\n    crossOrigin: \"anonymous\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Login;","map":{"version":3,"sources":["C:/wamp64/www/cp-fe/pages/auth/login.tsx"],"names":["Head","Link","useState","useEffect","Auth","useRouter","Prompt","Login","authentication_property","setAuthenticationProperty","password","setPassword","show","setShow","prompt_title","setPromptTitle","prompt_body","setPromptBody","link_to","setLinkTo","link_text","setLinkText","handleClose","callPrompt","title","link","message","router","authenticate","e","preventDefault","response","login","status","window","localStorage","setItem","JSON","stringify","data","push","err","body","document","classList","add","length","textAlign","target","value"],"mappings":"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","sourcesContent":["import Head from \"next/head\";\r\nimport Link from \"next/link\";\r\nimport { useState, FormEvent, useEffect } from \"react\";\r\nimport { Auth } from \"../../lib/endpoints\";\r\nimport { useRouter } from \"next/router\";\r\nimport Prompt from \"../../components/Prompt\";\r\n\r\nconst Login = () => {\r\n  const [authentication_property, setAuthenticationProperty] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n  const [show, setShow] = useState(false);\r\n  const [prompt_title, setPromptTitle] = useState(\"\");\r\n  const [prompt_body, setPromptBody] = useState(\"\");\r\n  const [link_to, setLinkTo] = useState(\"\");\r\n  const [link_text, setLinkText] = useState(\"\");\r\n\r\n  const handleClose = () => setShow(false);\r\n\r\n  const callPrompt = (\r\n    title: string,\r\n    link: string,\r\n    link_text: string,\r\n    message: string\r\n  ) => {\r\n    if (show) setShow(false);\r\n    setShow(true);\r\n    setPromptTitle(title);\r\n    setLinkText(link_text);\r\n    setLinkTo(link);\r\n    setPromptBody(message);\r\n  };\r\n  const router = useRouter();\r\n  const authenticate = async (e: FormEvent) => {\r\n    e.preventDefault();\r\n    try {\r\n      const response = await new Auth().login(\r\n        authentication_property,\r\n        password\r\n      );\r\n      if (response.status === 200) {\r\n        window.localStorage.setItem(\"cp-a\", JSON.stringify(response.data));\r\n        router.push(\"/blog\");\r\n      }\r\n    } catch (err) {\r\n      if (err.message === \"Request failed with status code 401\") {\r\n        // bad credentials\r\n        callPrompt(\r\n          \"Sign Up\",\r\n          \"\",\r\n          \"Close\",\r\n          \"Please check your credentials and try again.\"\r\n        );\r\n      } else if (err.message === \"Request failed with status code 404\") {\r\n        // bad endpoint\r\n        callPrompt(\"Sign Up\", \"\", \"Close\", \"Request failed\");\r\n      } else if (err.message === \"Network Error\") {\r\n        // bad network connection\r\n        callPrompt(\r\n          \"Sign Up\",\r\n          \"\",\r\n          \"Close\",\r\n          \"Please check your network connection and try again.\"\r\n        );\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    var body = document.body;\r\n\r\n    body.classList.add(\"parent\");\r\n  }, []);\r\n  return (\r\n    <>\r\n      <Head>\r\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\r\n        <link\r\n          rel=\"stylesheet\"\r\n          href=\"https://fonts.googleapis.com/icon?family=Material+Icons\"\r\n        />\r\n        <title>Login</title>\r\n        <link\r\n          rel=\"stylesheet\"\r\n          href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"\r\n          integrity=\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\"\r\n          crossOrigin=\"anonymous\"\r\n        />\r\n\r\n        <script\r\n          type=\"text/javascript\"\r\n          src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js\"\r\n        ></script>\r\n\r\n        <script\r\n          type=\"text/javascript\"\r\n          src=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-show-password/1.0.3/bootstrap-show-password.min.js\"\r\n        ></script>\r\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/login.css\" />\r\n      </Head>\r\n      <Prompt\r\n        title={prompt_title}\r\n        linkTo={link_to}\r\n        linkText={link_text}\r\n        show={show}\r\n        success={link_to.length > 0 ? true : false}\r\n        handleClose={handleClose}\r\n      >\r\n        <p>{prompt_body}</p>\r\n      </Prompt>\r\n      <div className=\"row\">\r\n        <div className=\"navbar\">\r\n          <img className=\"logo\" src=\"/images/Logo.png\" />\r\n        </div>\r\n      </div>\r\n      <div className=\"content\">\r\n        <div style={{ textAlign: \"center\" }}>\r\n          <div>\r\n            <h3>\r\n              <b>Login</b>\r\n            </h3>\r\n          </div>\r\n          <br />\r\n        </div>\r\n        <div className=\"row\">\r\n          <form className=\"needs-validation\" noValidate onSubmit={authenticate}>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"email\">Email / Phone Number</label>\r\n              <input\r\n                type=\"email\"\r\n                className=\"form-control textbox\"\r\n                id=\"InputEmail\"\r\n                placeholder=\"Please enter a valid email or phone number\"\r\n                value={authentication_property}\r\n                onChange={(e) => setAuthenticationProperty(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"exampleInputPassword1\">Password</label>\r\n              <span>\r\n                <input\r\n                  type=\"password\"\r\n                  className=\"form-control textbox\"\r\n                  id=\"InputPassword1\"\r\n                  placeholder=\"Password must be at least 8 characters\"\r\n                  data-toggle=\"password\"\r\n                  value={password}\r\n                  onChange={(e) => setPassword(e.target.value)}\r\n                />\r\n              </span>\r\n            </div>\r\n            <div style={{ textAlign: \"center\" }}>\r\n              <button type=\"submit\" className=\"btn btn-primary btn-block\">\r\n                Login\r\n              </button>\r\n            </div>\r\n            <br />\r\n            <div style={{ textAlign: \"center\" }}>\r\n              <div>\r\n                <a href=\"#\" className=\"texthover\">\r\n                  Forgot Password?\r\n                </a>\r\n              </div>\r\n              <br />\r\n              <div>\r\n                Don't have an account?{\" \"}\r\n                <Link href=\"/auth/signup\">\r\n                  <a className=\"signuptext\">\r\n                    <b>Sign Up</b>\r\n                  </a>\r\n                </Link>\r\n              </div>\r\n            </div>\r\n          </form>\r\n        </div>\r\n      </div>\r\n\r\n      <script type=\"text/javascript\" src=\"/js/a.js\"></script>\r\n      <script\r\n        src=\"https://kit.fontawesome.com/3303a2a495.js\"\r\n        crossOrigin=\"anonymous\"\r\n      ></script>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}