{"ast":null,"code":"var _jsxFileName = \"/home/james/Documents/dev/cp-fe/pages/auth/signup.tsx\";\nimport React from \"react\";\nvar __jsx = React.createElement;\nimport { useState } from \"react\";\nimport axios from \"axios\";\nimport Prompt from \"../../components/Prompt\";\nimport Head from \"next/head\";\n\nconst Signup = () => {\n  const {\n    0: authentication_property,\n    1: setAuthenticationProperty\n  } = useState(\"\");\n  const {\n    0: password,\n    1: setPassword\n  } = useState(\"\");\n  const {\n    0: confirm_password,\n    1: setConfirmPassword\n  } = useState(\"\");\n  const {\n    0: is_organization,\n    1: setIsOrganization\n  } = useState(false);\n  const {\n    0: show,\n    1: setShow\n  } = useState(false);\n  const {\n    0: prompt_title,\n    1: setPromptTitle\n  } = useState(\"\");\n  const {\n    0: prompt_body,\n    1: setPromptBody\n  } = useState(\"\");\n  const {\n    0: link_to,\n    1: setLinkTo\n  } = useState(\"\");\n  const {\n    0: link_text,\n    1: setLinkText\n  } = useState(\"\");\n\n  const handleClose = () => setShow(false);\n\n  const callPrompt = (title, link, link_text, message) => {\n    setShow(true);\n    setPromptTitle(title);\n    setLinkText(link_text);\n    setLinkTo(link);\n    setPromptBody(message);\n  };\n\n  const register = async e => {\n    e.preventDefault();\n\n    if (/^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(authentication_property) || /^\\d{10}$/.test(authentication_property)) {//email or phone number is valid. Currently validating 10 digits\n    } else {\n      callPrompt(\"Sign Up\", \"\", \"Close\", \"Please enter the correct email address or phone number\");\n      return;\n    } //Not an optimized way of coding. But as a temporal fix\n    // Validate lowercase letters\n\n\n    let lowerCaseLetters = /[a-z]/g;\n\n    if (!password.match(lowerCaseLetters)) {\n      callPrompt(\"Sign Up\", \"\", \"Close\", \"There should be at least one lowercase character\");\n      return;\n    } // Validate capital letters\n\n\n    let upperCaseLetters = /[A-Z]/g;\n\n    if (!password.match(upperCaseLetters)) {\n      callPrompt(\"Sign Up\", \"\", \"Close\", \"There should be at least one uppercase character\");\n      return;\n    } // Validate numbers\n\n\n    let numbers = /[0-9]/g;\n\n    if (!password.match(numbers)) {\n      callPrompt(\"Sign Up\", \"\", \"Close\", \"There should be at least one numeric character\");\n      return;\n    } // Validate length\n\n\n    if (password.length < 8) {\n      callPrompt(\"Sign Up\", \"\", \"Close\", \"Password should be eight or more characters long\");\n      return;\n    }\n\n    if (password !== confirm_password) {\n      callPrompt(\"Sign Up\", \"\", \"Close\", \"Password mismatch\");\n      return;\n    }\n\n    try {\n      const response = await axios.post(\"http://51.116.114.155:8080/auth/registration/\", {\n        email: authentication_property,\n        password: password,\n        is_organization: is_organization\n      });\n      console.log(\"response:\", response);\n\n      if (response.status === 200 || response.statusText === \"Created\") {\n        // go to landing page\n        callPrompt(\"Sign Up\", \"/auth/confirmaccount\", \"Confirm Account\", \"A confirmation has been sent to your email. Please retrieve the code and confirm acount\");\n      } else {\n        callPrompt(\"Sign Up\", \"\", \"Close\", \"Failed to register\");\n      }\n    } catch (err) {\n      console.log(err.message);\n\n      if (err.message === \"Request failed with status code 400\") {\n        callPrompt(\"Sign Up\", \"\", \"Close\", \"User with this email already exists\");\n      } else if (err.message === \"Request failed with status code 404\") {\n        // bad endpoint\n        callPrompt(\"Sign Up\", \"\", \"Close\", \"Request failed\");\n      } else if (err.message === \"Network Error\") {\n        // bad network connection\n        callPrompt(\"Sign Up\", \"\", \"Close\", \"Please check your network connection and try again.\");\n      }\n    }\n  };\n\n  return __jsx(React.Fragment, null, __jsx(Head, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 7\n    }\n  }, __jsx(\"meta\", {\n    name: \"viewport\",\n    content: \"width=device-width, initial-scale=1.0\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  }), __jsx(\"title\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 9\n    }\n  }, \"Sign Up\"), __jsx(\"link\", {\n    rel: \"stylesheet\",\n    href: \"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\",\n    integrity: \"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\",\n    crossOrigin: \"anonymous\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 157,\n      columnNumber: 9\n    }\n  }), __jsx(\"script\", {\n    type: \"text/javascript\",\n    src: \"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 163,\n      columnNumber: 9\n    }\n  }), __jsx(\"script\", {\n    type: \"text/javascript\",\n    src: \"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-show-password/1.0.3/bootstrap-show-password.min.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 9\n    }\n  }), __jsx(\"link\", {\n    rel: \"stylesheet\",\n    type: \"text/css\",\n    href: \"/sign_up.css\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 9\n    }\n  })), __jsx(Prompt, {\n    title: prompt_title,\n    linkTo: link_to,\n    linkText: link_text,\n    show: show,\n    success: link_to.length > 0 ? true : false,\n    handleClose: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }\n  }, __jsx(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 9\n    }\n  }, prompt_body)), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }\n  }, __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    className: \"navbar\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 11\n    }\n  }, __jsx(\"img\", {\n    className: \"logo\",\n    src: \"/images/Logo.svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 13\n    }\n  }))), __jsx(\"div\", {\n    className: \"content\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }, __jsx(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  }, __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 193,\n      columnNumber: 13\n    }\n  }, __jsx(\"img\", {\n    className: \"innerlogo\",\n    src: \"/images/Logo.svg\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 15\n    }\n  })), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 13\n    }\n  }), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 13\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 15\n    }\n  }, \"Make the most out of your business\")), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 13\n    }\n  }), __jsx(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 202,\n      columnNumber: 13\n    }\n  }, \"Already on Market Circle?\", \" \", __jsx(\"a\", {\n    href: \"login.html\",\n    className: \"logintext\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 15\n    }\n  }, __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 17\n    }\n  }, \"Log in\"))), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 208,\n      columnNumber: 13\n    }\n  })), __jsx(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 210,\n      columnNumber: 11\n    }\n  }, __jsx(\"form\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 13\n    }\n  }, __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 15\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 17\n    }\n  }, \"Email\"), __jsx(\"input\", {\n    type: \"email\",\n    className: \"form-control textbox\",\n    id: \"InputEmail\",\n    \"aria-describedby\": \"emailHelp\",\n    placeholder: \"Please enter a valid email\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 15\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"exampleInputPassword1\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 223,\n      columnNumber: 17\n    }\n  }, \"Password\"), __jsx(\"input\", {\n    type: \"password\",\n    className: \"form-control textbox\",\n    id: \"InputPassword1\",\n    placeholder: \"Password must be at least 8 characters\",\n    \"data-toggle\": \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 224,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 15\n    }\n  }, __jsx(\"label\", {\n    htmlFor: \"InputPassword2\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 17\n    }\n  }, \"Confirm Password\"), __jsx(\"input\", {\n    type: \"password\",\n    className: \"form-control textbox\",\n    id: \"exampleInputPassword1\",\n    placeholder: \"Re-Enter the same password as above\",\n    \"data-toggle\": \"password\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 234,\n      columnNumber: 17\n    }\n  })), __jsx(\"div\", {\n    className: \"form-group\",\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 15\n    }\n  }, __jsx(\"input\", {\n    type: \"radio\",\n    id: \"organization\",\n    name: \"account_type\",\n    defaultValue: \"organization\",\n    defaultChecked: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 243,\n      columnNumber: 17\n    }\n  }), __jsx(\"label\", {\n    htmlFor: \"organization\",\n    className: \"radio_spc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 250,\n      columnNumber: 17\n    }\n  }, \"Organization\"), __jsx(\"input\", {\n    type: \"radio\",\n    id: \"individual\",\n    name: \"account_type\",\n    defaultValue: \"individual\",\n    className: \"radio_spc\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 253,\n      columnNumber: 17\n    }\n  }), __jsx(\"label\", {\n    htmlFor: \"individual\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 17\n    }\n  }, \"Individual\")), __jsx(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 262,\n      columnNumber: 15\n    }\n  }, __jsx(\"button\", {\n    type: \"submit\",\n    className: \"btn btn-primary btn-block\",\n    id: \"signup_button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 263,\n      columnNumber: 17\n    }\n  }, \"Sign Up\")), __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 271,\n      columnNumber: 15\n    }\n  }), __jsx(\"div\", {\n    style: {\n      textAlign: \"center\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 272,\n      columnNumber: 15\n    }\n  }, \"By clicking sign up, you agree to the Market Circle\", __jsx(\"br\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 274,\n      columnNumber: 17\n    }\n  }), __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 275,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"texthover\",\n    id: \"user_agreement\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 276,\n      columnNumber: 19\n    }\n  }, \"User Agreement,\")), \" \", __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 280,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"texthover\",\n    id: \"privacy_policy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 281,\n      columnNumber: 19\n    }\n  }, \"Privacy Policy\")), \" \", \"and\", \" \", __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 286,\n      columnNumber: 17\n    }\n  }, __jsx(\"a\", {\n    href: \"#\",\n    className: \"texthover\",\n    id: \"cookie_policy\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 287,\n      columnNumber: 19\n    }\n  }, \"Cookie Policy.\"))), __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 15\n    }\n  }))), __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 295,\n      columnNumber: 11\n    }\n  })), __jsx(\"b\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 297,\n      columnNumber: 9\n    }\n  })), __jsx(\"script\", {\n    type: \"text/javascript\",\n    src: \"/js/a.js\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 300,\n      columnNumber: 7\n    }\n  }));\n};\n\nexport default Signup;","map":{"version":3,"sources":["/home/james/Documents/dev/cp-fe/pages/auth/signup.tsx"],"names":["useState","axios","Prompt","Head","Signup","authentication_property","setAuthenticationProperty","password","setPassword","confirm_password","setConfirmPassword","is_organization","setIsOrganization","show","setShow","prompt_title","setPromptTitle","prompt_body","setPromptBody","link_to","setLinkTo","link_text","setLinkText","handleClose","callPrompt","title","link","message","register","e","preventDefault","test","lowerCaseLetters","match","upperCaseLetters","numbers","length","response","post","email","console","log","status","statusText","err","textAlign"],"mappings":"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","sourcesContent":["import AuthHeader from \"../../components/auth/AuthHeader\";\nimport Link from \"next/link\";\nimport { useState, FormEvent } from \"react\";\nimport axios from \"axios\";\nimport Prompt from \"../../components/Prompt\";\nimport Head from \"next/head\";\n\nconst Signup = () => {\n  const [authentication_property, setAuthenticationProperty] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [confirm_password, setConfirmPassword] = useState(\"\");\n  const [is_organization, setIsOrganization] = useState(false);\n  const [show, setShow] = useState(false);\n  const [prompt_title, setPromptTitle] = useState(\"\");\n  const [prompt_body, setPromptBody] = useState(\"\");\n  const [link_to, setLinkTo] = useState(\"\");\n  const [link_text, setLinkText] = useState(\"\");\n\n  const handleClose = () => setShow(false);\n\n  const callPrompt = (\n    title: string,\n    link: string,\n    link_text: string,\n    message: string\n  ) => {\n    setShow(true);\n    setPromptTitle(title);\n    setLinkText(link_text);\n    setLinkTo(link);\n    setPromptBody(message);\n  };\n\n  const register = async (e: FormEvent) => {\n    e.preventDefault();\n    if (\n      /^\\w+([\\.-]?\\w+)*@\\w+([\\.-]?\\w+)*(\\.\\w{2,3})+$/.test(\n        authentication_property\n      ) ||\n      /^\\d{10}$/.test(authentication_property)\n    ) {\n      //email or phone number is valid. Currently validating 10 digits\n    } else {\n      callPrompt(\n        \"Sign Up\",\n        \"\",\n        \"Close\",\n        \"Please enter the correct email address or phone number\"\n      );\n      return;\n    }\n\n    //Not an optimized way of coding. But as a temporal fix\n    // Validate lowercase letters\n    let lowerCaseLetters = /[a-z]/g;\n    if (!password.match(lowerCaseLetters)) {\n      callPrompt(\n        \"Sign Up\",\n        \"\",\n        \"Close\",\n        \"There should be at least one lowercase character\"\n      );\n      return;\n    }\n\n    // Validate capital letters\n    let upperCaseLetters = /[A-Z]/g;\n    if (!password.match(upperCaseLetters)) {\n      callPrompt(\n        \"Sign Up\",\n        \"\",\n        \"Close\",\n        \"There should be at least one uppercase character\"\n      );\n      return;\n    }\n\n    // Validate numbers\n    let numbers = /[0-9]/g;\n    if (!password.match(numbers)) {\n      callPrompt(\n        \"Sign Up\",\n        \"\",\n        \"Close\",\n        \"There should be at least one numeric character\"\n      );\n      return;\n    }\n\n    // Validate length\n    if (password.length < 8) {\n      callPrompt(\n        \"Sign Up\",\n        \"\",\n        \"Close\",\n        \"Password should be eight or more characters long\"\n      );\n      return;\n    }\n\n    if (password !== confirm_password) {\n      callPrompt(\"Sign Up\", \"\", \"Close\", \"Password mismatch\");\n      return;\n    }\n    try {\n      const response = await axios.post(\n        \"http://51.116.114.155:8080/auth/registration/\",\n        {\n          email: authentication_property,\n          password: password,\n          is_organization: is_organization,\n        }\n      );\n\n      console.log(\"response:\", response);\n      if (response.status === 200 || response.statusText === \"Created\") {\n        // go to landing page\n\n        callPrompt(\n          \"Sign Up\",\n          \"/auth/confirmaccount\",\n          \"Confirm Account\",\n          \"A confirmation has been sent to your email. Please retrieve the code and confirm acount\"\n        );\n      } else {\n        callPrompt(\"Sign Up\", \"\", \"Close\", \"Failed to register\");\n      }\n    } catch (err) {\n      console.log(err.message);\n      if (err.message === \"Request failed with status code 400\") {\n        callPrompt(\n          \"Sign Up\",\n          \"\",\n          \"Close\",\n          \"User with this email already exists\"\n        );\n      } else if (err.message === \"Request failed with status code 404\") {\n        // bad endpoint\n        callPrompt(\"Sign Up\", \"\", \"Close\", \"Request failed\");\n      } else if (err.message === \"Network Error\") {\n        // bad network connection\n        callPrompt(\n          \"Sign Up\",\n          \"\",\n          \"Close\",\n          \"Please check your network connection and try again.\"\n        );\n      }\n    }\n  };\n\n  return (\n    <>\n      <Head>\n        <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n        <title>Sign Up</title>\n        <link\n          rel=\"stylesheet\"\n          href=\"https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css\"\n          integrity=\"sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u\"\n          crossOrigin=\"anonymous\"\n        />\n        <script\n          type=\"text/javascript\"\n          src=\"https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js\"\n        ></script>\n\n        <script\n          type=\"text/javascript\"\n          src=\"https://cdnjs.cloudflare.com/ajax/libs/bootstrap-show-password/1.0.3/bootstrap-show-password.min.js\"\n        ></script>\n\n        <link rel=\"stylesheet\" type=\"text/css\" href=\"/sign_up.css\" />\n      </Head>\n      <Prompt\n        title={prompt_title}\n        linkTo={link_to}\n        linkText={link_text}\n        show={show}\n        success={link_to.length > 0 ? true : false}\n        handleClose={handleClose}\n      >\n        <p>{prompt_body}</p>\n      </Prompt>\n      <div>\n        <div className=\"row\">\n          <div className=\"navbar\">\n            <img className=\"logo\" src=\"/images/Logo.svg\" />\n          </div>\n        </div>\n        <div className=\"content\">\n          <div style={{ textAlign: \"center\" }}>\n            <div>\n              <img className=\"innerlogo\" src=\"/images/Logo.svg\" />\n            </div>\n            <br />\n            <br />\n            <div>\n              <b>Make the most out of your business</b>\n            </div>\n            <br />\n            <div>\n              Already on Market Circle?{\" \"}\n              <a href=\"login.html\" className=\"logintext\">\n                <b>Log in</b>\n              </a>\n            </div>\n            <br />\n          </div>\n          <div className=\"row\">\n            <form>\n              <div className=\"form-group\">\n                <label htmlFor=\"email\">Email</label>\n                <input\n                  type=\"email\"\n                  className=\"form-control textbox\"\n                  id=\"InputEmail\"\n                  aria-describedby=\"emailHelp\"\n                  placeholder=\"Please enter a valid email\"\n                />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"exampleInputPassword1\">Password</label>\n                <input\n                  type=\"password\"\n                  className=\"form-control textbox\"\n                  id=\"InputPassword1\"\n                  placeholder=\"Password must be at least 8 characters\"\n                  data-toggle=\"password\"\n                />\n              </div>\n              <div className=\"form-group\">\n                <label htmlFor=\"InputPassword2\">Confirm Password</label>\n                <input\n                  type=\"password\"\n                  className=\"form-control textbox\"\n                  id=\"exampleInputPassword1\"\n                  placeholder=\"Re-Enter the same password as above\"\n                  data-toggle=\"password\"\n                />\n              </div>\n              <div className=\"form-group\" style={{ textAlign: \"center\" }}>\n                <input\n                  type=\"radio\"\n                  id=\"organization\"\n                  name=\"account_type\"\n                  defaultValue=\"organization\"\n                  defaultChecked\n                />\n                <label htmlFor=\"organization\" className=\"radio_spc\">\n                  Organization\n                </label>\n                <input\n                  type=\"radio\"\n                  id=\"individual\"\n                  name=\"account_type\"\n                  defaultValue=\"individual\"\n                  className=\"radio_spc\"\n                />\n                <label htmlFor=\"individual\">Individual</label>\n              </div>\n              <div style={{ textAlign: \"center\" }}>\n                <button\n                  type=\"submit\"\n                  className=\"btn btn-primary btn-block\"\n                  id=\"signup_button\"\n                >\n                  Sign Up\n                </button>\n              </div>\n              <br />\n              <div style={{ textAlign: \"center\" }}>\n                By clicking sign up, you agree to the Market Circle\n                <br />\n                <b>\n                  <a href=\"#\" className=\"texthover\" id=\"user_agreement\">\n                    User Agreement,\n                  </a>\n                </b>{\" \"}\n                <b>\n                  <a href=\"#\" className=\"texthover\" id=\"privacy_policy\">\n                    Privacy Policy\n                  </a>\n                </b>{\" \"}\n                and{\" \"}\n                <b>\n                  <a href=\"#\" className=\"texthover\" id=\"cookie_policy\">\n                    Cookie Policy.\n                  </a>\n                </b>\n              </div>\n              <b></b>\n            </form>\n          </div>\n          <b></b>\n        </div>\n        <b></b>\n      </div>\n\n      <script type=\"text/javascript\" src=\"/js/a.js\"></script>\n    </>\n  );\n};\n\nexport default Signup;\n"]},"metadata":{},"sourceType":"module"}