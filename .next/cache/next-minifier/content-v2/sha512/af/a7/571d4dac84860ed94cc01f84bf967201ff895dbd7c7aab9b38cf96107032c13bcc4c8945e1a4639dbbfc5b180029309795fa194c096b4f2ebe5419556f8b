{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[9],{fY9I:function(e,t,r){\"use strict\";r.r(t);var n=r(\"o0o1\"),a=r.n(n),o=r(\"HaE+\"),u=r(\"q1tI\"),c=r.n(u),s=r(\"8Kt/\"),i=r.n(s),l=r(\"nOHt\"),p=r(\"+oBk\"),f=r(\"YFqc\"),b=r.n(f);function d(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function h(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,\"value\"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var m=function(){var e=Object(o.a)(a.a.mark((function e(t){var r,n,o,u,c,s,i,l,p=arguments;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=p.length>1&&void 0!==p[1]?p[1]:{},n=\"http://51.116.114.155:8080\",o=localStorage.getItem(\"cp-a\"),u={\"Content-Type\":\"application/json\",Accept:\"application/json\"},o&&(o=JSON.parse(o),u.Authorization=\"Bearer \".concat(o.access)),void 0!==r&&r.headers)for(c in r.headers)u[c]=r.headers[c];return r.headers=u,s=null,i=null,l=null,e.prev=10,e.next=13,fetch(\"\".concat(n).concat(t),r);case 13:return s=e.sent,e.next=16,s.text();case 16:i=e.sent,e.prev=17,l=JSON.parse(i),e.next=24;break;case 21:return e.prev=21,e.t0=e.catch(17),e.abrupt(\"return\",{error:i});case 24:return l.error,e.abrupt(\"return\",l);case 28:return e.prev=28,e.t1=e.catch(10),e.abrupt(\"return\",{error:e.t1.message});case 31:case\"end\":return e.stop()}}),e,null,[[10,28],[17,21]])})));return function(t){return e.apply(this,arguments)}}(),g=m,v=r(\"vDqi\"),w=r.n(v);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){d(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var j=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError(\"Cannot call a class as a function\")}(this,e)}var t,r,n;return t=e,(r=[{key:\"signup\",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URLSearchParams(t).toString(),e.next=3,g(\"/register\",{method:\"POST\",body:r});case 3:return e.abrupt(\"return\",e.sent);case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"login\",value:function(){var e=Object(o.a)(a.a.mark((function e(t,r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,w.a.post(\"http://51.116.114.155:8080/auth/token\",{authentication_property:t,password:r});case 2:return n=e.sent,e.abrupt(\"return\",n);case 4:case\"end\":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()},{key:\"forgotpassword\",value:function(){var e=Object(o.a)(a.a.mark((function e(t){var r;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=new URLSearchParams(t).toString(),e.next=3,g(\"/auth/password-forgotten\",{method:\"POST\",body:r});case 3:return e.abrupt(\"return\",e.sent);case 4:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"generic_query\",value:function(){var e=Object(o.a)(a.a.mark((function e(t){return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g(\"/\".concat(t.endpoint,\"/\").concat(t.query_params),O({method:t.method},t.options));case 2:return e.abrupt(\"return\",e.sent);case 3:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}])&&h(t.prototype,r),n&&h(t,n),e}(),S=c.a.createElement;t.default=function(){var e=Object(u.useState)(!1),t=(e[0],e[1]),r=Object(u.useState)(null),n=(r[0],r[1],Object(u.useState)(null)),s=(n[0],n[1],Object(u.useState)(null)),f=(s[0],s[1],Object(u.useState)(\"\")),d=(f[0],f[1],Object(u.useState)(null)),h=(d[0],d[1]),m=Object(u.useState)(null),g=(m[0],m[1]),v=Object(u.useState)(\"\"),w=v[0],y=v[1],O=Object(u.useState)(\"\"),P=O[0],k=O[1],x=Object(u.useState)(!1),N=(x[0],x[1]),E=Object(u.useState)(\"\"),_=E[0],T=E[1],A=Object(u.useState)(\"blue\"),D=A[0],q=A[1],I=Object(l.useRouter)(),R=function(){var e=Object(o.a)(a.a.mark((function e(r){var n;return a.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.preventDefault(),N(!0),q(\"blue\"),T(\"Please wait...\"),e.prev=4,e.next=7,(new j).login(w,P);case 7:200===(n=e.sent).status&&(N(!1),console.log(\"RESULT:\",n),q(\"blue\"),T(\"Authentication success\"),setTimeout((function(){window.localStorage.setItem(\"cp-a\",JSON.stringify(n.data)),I.push(\"/jobs\")}),250)),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(4),console.log(e.t0.message),\"Request failed with status code 401\"===e.t0.message?(console.log(\"BAD CREDENTIALS\"),q(\"red\"),T(\"Please check your credentials and try again.\"),h(\"signup\"),g(\"Signup\"),t(!0),N(!1)):\"Request failed with status code 404\"===e.t0.message?(q(\"red\"),T(\"An error occured. Contact systems admin\")):\"Network Error\"===e.t0.message&&(q(\"red\"),T(\"Please check your network connection and try again.\"),N(!1)),setTimeout((function(){T(\"\")}),3500);case 16:case\"end\":return e.stop()}}),e,null,[[4,11]])})));return function(t){return e.apply(this,arguments)}}();return S(c.a.Fragment,null,S(p.a,null,S(i.a,null,S(\"link\",{rel:\"stylesheet\",type:\"text/css\",href:\"/auth.css\"})),S(\"div\",{style:{textAlign:\"center\"}},S(\"div\",null,S(\"h3\",null,S(\"b\",null,\"Login\"))),S(\"br\",null)),\" \",S(\"div\",{className:\"row\"},S(\"form\",{style:{width:\"100%\"},onSubmit:R},S(\"div\",{className:\"form-group col-12\"},S(\"label\",{htmlFor:\"email\"},\"Email address / Phone Number\"),S(\"input\",{type:\"email\",className:\"form-control cinput\",id:\"email\",\"aria-describedby\":\"emailHelp\",placeholder:\"Enter email or Phone number\",value:w,onChange:function(e){return y(e.target.value)}})),S(\"div\",{className:\"form-group col-12\"},S(\"label\",{htmlFor:\"exampleInputPassword1\"},\"Password\"),S(\"input\",{type:\"password\",className:\"form-control cinput\",id:\"password\",placeholder:\"Password\",\"data-toggle\":\"password\",value:P,onChange:function(e){return k(e.target.value)}})),S(\"div\",{className:\"form-group col-12\"},S(\"button\",{type:\"submit\",className:\"btn btn-primary btn-block submitbutton\",id:\"submitButton\"},\"Login\")),S(\"div\",{style:{textAlign:\"center\",color:D}},\"\\xa0\",_),S(\"br\",null),S(\"div\",{style:{textAlign:\"center\",fontWeight:\"bolder\"}},S(\"a\",null,\"Forgotten Password?\"),S(\"br\",null),\"Don't have an account?\",S(b.a,{href:\"/auth/signup\"},S(\"a\",{id:\"signup\"},\"Sign Up\")))))))}},yzXZ:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/auth/login\",function(){return r(\"fY9I\")}])}},[[\"yzXZ\",0,1,2,3,4]]]);","extractedComments":[]}